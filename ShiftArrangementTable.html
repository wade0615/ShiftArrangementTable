<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shift Arrangement Table</title>
</head>
<body>
    <h1>Look at console</h1>
    <!-- <script src="scripts/main.js"></script> -->
    <script>

// 第二階段的做法，用陣列將整放資料包起來，再不斷用 .map 重整與建立新資料
        const employeeData = [
            {code: "H", schedule: [1,1,0,0,1,1,1]}, //每個物件會有一個員工代號與選擇休假日的陣列
            {code: "N", schedule: [1,0,1,1,0,1,1]}, //休假陣列用 布林值 表示
            {code: "B", schedule: [1,1,1,1,1,0,0]},
            {code: "S", schedule: [0,1,1,1,1,1,0]}
        ];

        const employeeData_InName = employeeData.map(data => { //建立一個新data，將布林值轉換成各員工代號
            schedule_InName = data.schedule.map(e => {return (e === 1 ? data.code : '')});
            return data = {
                code: data.code,
                schedule: schedule_InName
            }
        });
        console.log(employeeData_InName);

        const employeeSchedule = employeeData_InName.map(e => { // 取出含有各員工代號的休假日陣列
            return e.schedule;
        })
        console.table(employeeSchedule);

        function makeShiftTable(e){ //依照日期顯示各日可上班的員工
            for(i=0; i<7; i++) {
                // ShiftTable[i] = e[0][i] + e[1][i] + e[2][i];
                employees = [];
                for(cont=0; cont < e.length; cont++) {
                    employees[cont] = e[cont][i];
                    // console.log(employees);
                }
                ShiftTable[i] = employees.join('');
            };
            return ShiftTable;
        };

        ShiftTable = [];
        ShiftTable = makeShiftTable(employeeSchedule); //生成班表
        console.log(ShiftTable);

    </script>
</body>
</html>